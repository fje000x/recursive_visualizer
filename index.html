<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AlgoFlowz</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="global-nav">
        <div class="nav-left">
            <div class="logo">
                <svg class="logo-svg" viewBox="0 0 222 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Connecting lines -->
                    <line x1="22" y1="14" x2="28" y2="14" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="46" y1="14" x2="52" y2="14" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="70" y1="14" x2="76" y2="14" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="94" y1="14" x2="104" y2="14" stroke="rgba(255,255,255,0.15)" stroke-width="1" stroke-dasharray="2 2"/>
                    <line x1="122" y1="14" x2="128" y2="14" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="146" y1="14" x2="152" y2="14" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="170" y1="14" x2="176" y2="14" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="194" y1="14" x2="200" y2="14" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
                    <!-- ALGO nodes -->
                    <circle cx="12" cy="14" r="11" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1.8"/>
                    <text x="12" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#e2e8f0" text-anchor="middle">A</text>
                    <circle cx="36" cy="14" r="11" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1.8"/>
                    <text x="36" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#e2e8f0" text-anchor="middle">L</text>
                    <circle cx="60" cy="14" r="11" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1.8"/>
                    <text x="60" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#e2e8f0" text-anchor="middle">G</text>
                    <circle cx="84" cy="14" r="11" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1.8"/>
                    <text x="84" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#e2e8f0" text-anchor="middle">O</text>
                    <!-- FLOWZ nodes -->
                    <circle cx="114" cy="14" r="11" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.8"/>
                    <text x="114" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#fb923c" text-anchor="middle">F</text>
                    <circle cx="138" cy="14" r="11" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.8"/>
                    <text x="138" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#fb923c" text-anchor="middle">L</text>
                    <circle cx="162" cy="14" r="11" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.8"/>
                    <text x="162" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#fb923c" text-anchor="middle">O</text>
                    <circle cx="186" cy="14" r="11" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.8"/>
                    <text x="186" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#fb923c" text-anchor="middle">W</text>
                    <circle cx="210" cy="14" r="11" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.8"/>
                    <text x="210" y="18.5" font-family="Inter, sans-serif" font-weight="800" font-size="12" fill="#fb923c" text-anchor="middle">Z</text>
                </svg>
            </div>
            <!-- Search bar -->
            <div class="search-bar-wrapper">
                <input 
                    type="text" 
                    id="searchInput" 
                    class="search-bar" 
                    placeholder="Search problems..." 
                    autocomplete="off"
                >
                <i class="fas fa-search"></i>
                <div id="searchDropdown" class="search-dropdown" style="display:none;"></div>
            </div>
            <!-- All Problems button -->
            <button id="problemListBtn" class="modern-select" style="background: var(--bg-card); border: 1px solid var(--border); cursor: pointer; padding: 0 14px; height: 34px; gap: 8px; display: flex; align-items: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 260px;">
                <i class="fas fa-list"></i> All Problems
            </button>
            <!-- LeetCode link -->
            <a id="leetcodeLink" class="leetcode-link" href="#" target="_blank" rel="noopener noreferrer" title="Open on LeetCode">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.94-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"/></svg>
            </a>
            <!-- YouTube button -->
            <button id="youtubeBtn" class="youtube-link" type="button" title="Recommended Videos">
                <i class="fab fa-youtube"></i>
            </button>
        </div>
        <div class="nav-right">
            <div class="algorithm-selector">
                <label for="algorithmSelect" class="algorithm-label">Algorithm:</label>
                <select id="algorithmSelect" class="modern-select">
                </select>
            </div>
            <div class="control-info">
                <span class="control-hint">Use ← → arrow keys or buttons to navigate</span>
            </div>
        </div>
    </header>

    <!-- Problem List Modal - Full Screen -->
    <div id="problemModal" class="problem-modal">
        <div class="problem-modal-content">
            <div class="problem-modal-header">
                <h2>All Problems</h2>
                <button id="problemModalClose" class="problem-modal-close" type="button">✕</button>
            </div>
            
            <div class="problem-modal-filters">
                <div class="filter-group">
                    <label>Topic:</label>
                    <div class="filter-options">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="tree">Tree</button>
                        <button class="filter-btn" data-filter="array">Array</button>
                        <button class="filter-btn" data-filter="recursion">Recursion</button>
                        <button class="filter-btn" data-filter="dfs">DFS</button>
                        <button class="filter-btn" data-filter="bfs">BFS</button>
                        <button class="filter-btn" data-filter="two-pointers">Two Pointers</button>
                        <button class="filter-btn" data-filter="stack">Stack</button>
                        <button class="filter-btn" data-filter="queue">Queue</button>
                        <button class="filter-btn" data-filter="graph">Graph</button>
                        <button class="filter-btn" data-filter="leetcode150">LeetCode 150</button>
                    </div>
                </div>
            </div>

            <div id="problemList" class="problem-list">
            </div>
        </div>
    </div>

    <main class="app-layout">
        <section class="module code-module">
            <div class="module-header">
                <div class="module-label">
                    <span>SOURCE CODE</span>
                </div>
                <div class="language-badge">Python</div>
            </div>
            <div id="codeEditor" class="code-viewport"></div>
            <div class="code-info">
                <div class="complexity-info">
                    <div class="complexity-item">
                        <span class="complexity-label">Time Complexity</span>
                        <span id="timeComplexity" class="complexity-value">O(n)</span>
                    </div>
                    <div class="complexity-item">
                        <span class="complexity-label">Space Complexity</span>
                        <span id="spaceComplexity" class="complexity-value">O(h)</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="module viz-module">
            <div class="module-header">
            </div>
            <button id="codeToggleBtn" class="code-toggle-btn" title="Toggle source code">
                <span class="toggle-label">Code</span><i class="fas fa-chevron-left"></i>
            </button>
            <button id="stackToggleBtn" class="stack-toggle-btn" title="Toggle call stack">
                <span class="toggle-label">Stack</span><i class="fas fa-chevron-left"></i>
            </button>
            <!-- Mobile algorithm selector -->
            <div class="mobile-algo-selector">
                <select id="mobileAlgorithmSelect" class="mobile-algo-select">
                </select>
            </div>
            <div id="canvas" class="render-engine">
                <div id="treeCanvas" class="tree-canvas">
                    <!-- SVG layer for edges / arrows -->
                    <svg id="svgLines" class="svg-lines" xmlns="http://www.w3.org/2000/svg"></svg>
                    <!-- Nodes will be injected here -->
                    <div id="nodesContainer" class="nodes-container"></div>
                </div>
                <!-- Queue visualization (hidden when empty) -->
                <div id="queueContainer" class="queue-container" style="display:none"></div>
            </div>
            <div class="console-panel">
                <div id="console" class="console-text"></div>
            </div>

            <div class="action-bar">
                <button onclick="changeStep(-1)" id="prevBtn" class="control-btn">
                    <i class="fas fa-chevron-left"></i><span>Prev</span>
                </button>
                <button onclick="toggleAutoPlay()" id="desktopPlayBtn" class="control-btn">
                    <i class="fas fa-play"></i><span>Play</span>
                </button>
                <button onclick="changeStep(1)" id="nextBtn" class="control-btn primary">
                    <i class="fas fa-chevron-right"></i><span>Next</span>
                </button>
                <button onclick="resetVisualization()" class="control-btn secondary">
                    <i class="fas fa-redo"></i><span>Reset</span>
                </button>
            </div>
        </section>

        <section class="module stack-module">
            <div class="module-header">
            </div>
            <div class="stack-controls">
                <div id="stackLabel" class="stack-header">CALL STACK</div>
            </div>
            <div class="stack-stats-bar">
                <div class="stack-stat">
                    <span id="activeCallsLabel" class="stack-stat-label">Active</span>
                    <span id="activeCalls" class="stack-stat-value active-val">0</span>
                </div>
                <div class="stack-stat">
                    <span id="depthLabel" class="stack-stat-label">Depth</span>
                    <span id="stackDepth" class="stack-stat-value depth-val">0</span>
                </div>
                <div class="stack-stat">
                    <span id="maxLabel" class="stack-stat-label">Max</span>
                    <span id="maxDepth" class="stack-stat-value max-val">0</span>
                </div>
            </div>
            <div id="stackList" class="stack-viewport">
            </div>
            <div id="stackLegend" class="stack-legend">
            </div>
        </section>
    </main>

    <div id="youtubeModal" class="youtube-modal">
        <div class="youtube-modal-content">
            <div class="youtube-modal-header">
                <h3><i class="fab fa-youtube"></i> Recommended Videos</h3>
                <button id="youtubeModalClose" class="youtube-modal-close" type="button">✕</button>
            </div>
            <div id="youtubeContent" class="youtube-modal-body"></div>
        </div>
    </div>

    <div id="annotation-tooltip" class="annotation-tooltip" style="display:none;"></div>

    <!-- Mobile bottom floating pill -->
    <nav class="mobile-bottom-nav">
        <button onclick="changeStep(-1)" id="mobilePrevBtn" class="control-btn">
            <i class="fas fa-chevron-left"></i><span>Prev</span>
        </button>
        <button onclick="toggleAutoPlay()" id="mobilePlayBtn" class="control-btn">
            <i class="fas fa-play"></i><span>Play</span>
        </button>
        <button onclick="changeStep(1)" id="mobileNextBtn" class="control-btn primary">
            <i class="fas fa-chevron-right"></i><span>Next</span>
        </button>
        <button onclick="resetVisualization()" class="control-btn secondary">
            <i class="fas fa-redo"></i><span>Reset</span>
        </button>
    </nav>

    <script src="script.js"></script>
</body>
</html>
